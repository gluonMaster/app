# Generated by Django 4.2.7 on 2025-08-19 17:13

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("contracts", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ("lessons", "0001_initial"),
        ("clients", "0001_initial"),
    ]

    operations = [
        migrations.AddField(
            model_name="pricelist",
            name="subject",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="lessons.subject",
                verbose_name="Fach",
            ),
        ),
        migrations.AddField(
            model_name="paymentplaninstallment",
            name="payment_plan",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="installments",
                to="contracts.paymentplan",
                verbose_name="Ratenzahlungsplan",
            ),
        ),
        migrations.AddField(
            model_name="paymentplan",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                to=settings.AUTH_USER_MODEL,
                verbose_name="Erstellt von",
            ),
        ),
        migrations.AddField(
            model_name="paymentplan",
            name="debt",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="payment_plan",
                to="contracts.debt",
                verbose_name="Schuld",
            ),
        ),
        migrations.AddField(
            model_name="payment",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                to=settings.AUTH_USER_MODEL,
                verbose_name="Erstellt von",
            ),
        ),
        migrations.AddField(
            model_name="payment",
            name="invoice",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="payments",
                to="contracts.invoice",
                verbose_name="Rechnung",
            ),
        ),
        migrations.AddField(
            model_name="onetimecharge",
            name="child",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="clients.child",
                verbose_name="Kind",
            ),
        ),
        migrations.AddField(
            model_name="onetimecharge",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                to=settings.AUTH_USER_MODEL,
                verbose_name="Erstellt von",
            ),
        ),
        migrations.AddField(
            model_name="onetimecharge",
            name="parent",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="one_time_charges",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Elternteil",
            ),
        ),
        migrations.AddField(
            model_name="invoiceitem",
            name="child",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="clients.child",
                verbose_name="Kind",
            ),
        ),
        migrations.AddField(
            model_name="invoiceitem",
            name="invoice",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="items",
                to="contracts.invoice",
                verbose_name="Rechnung",
            ),
        ),
        migrations.AddField(
            model_name="invoiceitem",
            name="subject",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="lessons.subject",
                verbose_name="Fach",
            ),
        ),
        migrations.AddField(
            model_name="invoice",
            name="contract_items",
            field=models.ManyToManyField(
                blank=True,
                to="contracts.contractitem",
                verbose_name="Vertragspositionen",
            ),
        ),
        migrations.AddField(
            model_name="invoice",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                to=settings.AUTH_USER_MODEL,
                verbose_name="Erstellt von",
            ),
        ),
        migrations.AddField(
            model_name="invoice",
            name="one_time_charges",
            field=models.ManyToManyField(
                blank=True,
                to="contracts.onetimecharge",
                verbose_name="Einmalige Gebuehren",
            ),
        ),
        migrations.AddField(
            model_name="invoice",
            name="parent",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="invoices",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Kunde",
            ),
        ),
        migrations.AddField(
            model_name="discount",
            name="discount_type",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="contracts.discounttype",
                verbose_name="Rabatttyp",
            ),
        ),
        migrations.AddField(
            model_name="debt",
            name="invoice",
            field=models.OneToOneField(
                on_delete=django.db.models.deletion.CASCADE,
                to="contracts.invoice",
                verbose_name="Rechnung",
            ),
        ),
        migrations.AddField(
            model_name="debt",
            name="parent",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="debts",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Schuldner",
            ),
        ),
        migrations.AddField(
            model_name="contractitemdiscount",
            name="applied_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                to=settings.AUTH_USER_MODEL,
                verbose_name="Angewandt von",
            ),
        ),
        migrations.AddField(
            model_name="contractitemdiscount",
            name="contract_item",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="contracts.contractitem",
                verbose_name="Vertragsposition",
            ),
        ),
        migrations.AddField(
            model_name="contractitemdiscount",
            name="discount",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="contracts.discount",
                verbose_name="Rabatt",
            ),
        ),
        migrations.AddField(
            model_name="contractitem",
            name="applied_discounts",
            field=models.ManyToManyField(
                blank=True,
                through="contracts.ContractItemDiscount",
                to="contracts.discount",
                verbose_name="Angewandte Rabatte",
            ),
        ),
        migrations.AddField(
            model_name="contractitem",
            name="child",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="clients.child",
                verbose_name="Kind",
            ),
        ),
        migrations.AddField(
            model_name="contractitem",
            name="contract",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="items",
                to="contracts.contract",
                verbose_name="Vertrag",
            ),
        ),
        migrations.AddField(
            model_name="contractitem",
            name="subject",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                to="lessons.subject",
                verbose_name="Fach",
            ),
        ),
        migrations.AddField(
            model_name="contractchangerequest",
            name="child",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="clients.child",
                verbose_name="Kind",
            ),
        ),
        migrations.AddField(
            model_name="contractchangerequest",
            name="contract",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                related_name="change_requests",
                to="contracts.contract",
                verbose_name="Vertrag",
            ),
        ),
        migrations.AddField(
            model_name="contractchangerequest",
            name="parent",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="change_requests",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Antragsteller",
            ),
        ),
        migrations.AddField(
            model_name="contractchangerequest",
            name="processed_by",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="processed_requests",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Bearbeitet von",
            ),
        ),
        migrations.AddField(
            model_name="contractchangerequest",
            name="subject",
            field=models.ForeignKey(
                blank=True,
                null=True,
                on_delete=django.db.models.deletion.CASCADE,
                to="lessons.subject",
                verbose_name="Fach",
            ),
        ),
        migrations.AddField(
            model_name="contract",
            name="created_by",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.PROTECT,
                related_name="created_contracts",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Erstellt von",
            ),
        ),
        migrations.AddField(
            model_name="contract",
            name="parent",
            field=models.ForeignKey(
                on_delete=django.db.models.deletion.CASCADE,
                related_name="contracts",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Elternteil",
            ),
        ),
        migrations.AddField(
            model_name="contract",
            name="updated_by",
            field=models.ForeignKey(
                null=True,
                on_delete=django.db.models.deletion.PROTECT,
                related_name="updated_contracts",
                to=settings.AUTH_USER_MODEL,
                verbose_name="Aktualisiert von",
            ),
        ),
        migrations.AlterUniqueTogether(
            name="paymentplaninstallment",
            unique_together={("payment_plan", "installment_number")},
        ),
        migrations.AlterUniqueTogether(
            name="contractitem",
            unique_together={("contract", "child", "subject")},
        ),
    ]
